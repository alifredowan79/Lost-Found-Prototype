<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Item - BUBT Lost and Found System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-brand">
                <i class="fas fa-search-location"></i>
                <h1>BUBT Lost & Found</h1>
            </div>
            <ul class="nav-menu">
                <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
                <li><a href="create-item.html" class="nav-link active">Create Item</a></li>
                <li><a href="report.html" class="nav-link">Report Items</a></li>
                <li><a href="search.html" class="nav-link">Search Items</a></li>
                <li><a href="invoice.html" class="nav-link">Generate Invoice</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
            </ul>
            <div class="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <main class="main">
        <!-- Create Item Section -->
        <section id="create-item" class="create-item-section">
            <div class="container">
                <h2 class="section-title">Create New Item</h2>
                <p class="section-description">Add a new lost or found item to the system database</p>
                
                <!-- Create Item Form -->
                <div class="create-item-container">
                    <form id="create-item-form" class="create-item-form">
                        <!-- Basic Information -->
                        <div class="form-section">
                            <h3><i class="fas fa-info-circle"></i> Basic Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="item-name">Item Name *</label>
                                    <input type="text" id="item-name" name="item-name" placeholder="e.g., iPhone 13 Pro, Gold Necklace" required>
                                </div>
                                <div class="form-group">
                                    <label for="item-category">Category *</label>
                                    <select id="item-category" name="item-category" required>
                                        <option value="">Select Category</option>
                                        <option value="electronics">Electronics</option>
                                        <option value="jewelry">Jewelry</option>
                                        <option value="clothing">Clothing</option>
                                        <option value="documents">Documents</option>
                                        <option value="keys">Keys</option>
                                        <option value="books">Books</option>
                                        <option value="bags">Bags & Backpacks</option>
                                        <option value="watches">Watches</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="item-status">Status *</label>
                                    <select id="item-status" name="item-status" required>
                                        <option value="">Select Status</option>
                                        <option value="lost">Lost</option>
                                        <option value="found">Found</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="item-date">Date *</label>
                                    <input type="date" id="item-date" name="item-date" required>
                                </div>
                            </div>
                        </div>

                        <!-- Location Information -->
                        <div class="form-section">
                            <h3><i class="fas fa-map-marker-alt"></i> Location Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="item-location">Location *</label>
                                    <input type="text" id="item-location" name="item-location" placeholder="e.g., Main Library, 2nd Floor, Room 205" required>
                                </div>
                                <div class="form-group">
                                    <label for="item-building">Building</label>
                                    <select id="item-building" name="item-building">
                                        <option value="">Select Building</option>
                                        <option value="main-building">Main Building</option>
                                        <option value="library">Library</option>
                                        <option value="student-center">Student Center</option>
                                        <option value="cafeteria">Cafeteria</option>
                                        <option value="parking">Parking Area</option>
                                        <option value="gymnasium">Gymnasium</option>
                                        <option value="computer-lab">Computer Lab</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="item-floor">Floor/Room</label>
                                <input type="text" id="item-floor" name="item-floor" placeholder="e.g., 2nd Floor, Room 205">
                            </div>
                        </div>

                        <!-- Item Details -->
                        <div class="form-section">
                            <h3><i class="fas fa-tags"></i> Item Details</h3>
                            <div class="form-group">
                                <label for="item-description">Description *</label>
                                <textarea id="item-description" name="item-description" rows="4" placeholder="Provide detailed description of the item, including any identifying marks, colors, brand, model, or special features" required></textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="item-color">Color</label>
                                    <input type="text" id="item-color" name="item-color" placeholder="e.g., Black, Blue, Red">
                                </div>
                                <div class="form-group">
                                    <label for="item-brand">Brand/Model</label>
                                    <input type="text" id="item-brand" name="item-brand" placeholder="e.g., Apple iPhone 13 Pro, Samsung Galaxy">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="item-value">Estimated Value (BDT)</label>
                                <input type="number" id="item-value" name="item-value" placeholder="e.g., 50000" min="0">
                            </div>
                        </div>

                        <!-- Contact Information -->
                        <div class="form-section">
                            <h3><i class="fas fa-user"></i> Contact Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="item-contact">Contact Email *</label>
                                    <input type="email" id="item-contact" name="item-contact" placeholder="your.email@bubt.edu.bd" required>
                                </div>
                                <div class="form-group">
                                    <label for="item-phone">Phone Number</label>
                                    <input type="tel" id="item-phone" name="item-phone" placeholder="e.g., +880 17XX XXX XXX">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="item-student-id">Student ID (if applicable)</label>
                                <input type="text" id="item-student-id" name="item-student-id" placeholder="e.g., 2024001">
                            </div>
                        </div>

                        <!-- Additional Information -->
                        <div class="form-section">
                            <h3><i class="fas fa-plus-circle"></i> Additional Information</h3>
                            <div class="form-group">
                                <label for="item-notes">Additional Notes</label>
                                <textarea id="item-notes" name="item-notes" rows="3" placeholder="Any additional information, special instructions, or context about the item"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="item-priority">Priority Level</label>
                                <select id="item-priority" name="item-priority">
                                    <option value="low">Low</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="high">High</option>
                                    <option value="urgent">Urgent</option>
                                </select>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="resetForm()">
                                <i class="fas fa-undo"></i> Reset Form
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Create Item
                            </button>
                        </div>
                    </form>

                    <!-- Form Preview -->
                    <div class="form-preview">
                        <h3><i class="fas fa-eye"></i> Item Preview</h3>
                        <div id="item-preview" class="preview-content">
                            <p class="preview-placeholder">Fill out the form to see a preview of your item</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="script.js"></script>
    <script>
        // Initialize create item page
        document.addEventListener('DOMContentLoaded', function() {
            // Check login status first
            checkLoginStatus();
            
            // Set current date
            document.getElementById('item-date').value = new Date().toISOString().split('T')[0];
            
            // Initialize form preview
            initializeFormPreview();
            
            // Initialize form submission
            initializeCreateItemForm();
        });

        // Check if user is logged in
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn !== 'true') {
                // User is not logged in, redirect to login page
                window.location.href = 'index.html';
            }
        }

        // Initialize form preview
        function initializeFormPreview() {
            const form = document.getElementById('create-item-form');
            const inputs = form.querySelectorAll('input, select, textarea');
            
            inputs.forEach(input => {
                input.addEventListener('input', updatePreview);
                input.addEventListener('change', updatePreview);
            });
        }

        // Update preview
        function updatePreview() {
            const preview = document.getElementById('item-preview');
            const formData = new FormData(document.getElementById('create-item-form'));
            
            let previewHTML = '';
            
            if (formData.get('item-name')) {
                previewHTML = `
                    <div class="preview-item">
                        <h4>${formData.get('item-name')}</h4>
                        <p><strong>Category:</strong> ${formData.get('item-category') || 'Not specified'}</p>
                        <p><strong>Status:</strong> <span class="status-${formData.get('item-status')}">${formData.get('item-status')?.toUpperCase() || 'Not specified'}</span></p>
                        <p><strong>Date:</strong> ${formData.get('item-date') || 'Not specified'}</p>
                        <p><strong>Location:</strong> ${formData.get('item-location') || 'Not specified'}</p>
                        <p><strong>Description:</strong> ${formData.get('item-description') || 'Not specified'}</p>
                        <p><strong>Contact:</strong> ${formData.get('item-contact') || 'Not specified'}</p>
                    </div>
                `;
            } else {
                previewHTML = '<p class="preview-placeholder">Fill out the form to see a preview of your item</p>';
            }
            
            preview.innerHTML = previewHTML;
        }

        // Initialize create item form
        function initializeCreateItemForm() {
            const form = document.getElementById('create-item-form');
            form.addEventListener('submit', handleCreateItem);
        }

        // Handle create item form submission
        function handleCreateItem(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const newItem = {
                id: Date.now(), // Generate unique ID
                name: formData.get('item-name'),
                category: formData.get('item-category'),
                status: formData.get('item-status'),
                date: formData.get('item-date'),
                location: formData.get('item-location'),
                building: formData.get('item-building'),
                floor: formData.get('item-floor'),
                description: formData.get('item-description'),
                color: formData.get('item-color'),
                brand: formData.get('item-brand'),
                value: formData.get('item-value'),
                contact: formData.get('item-contact'),
                phone: formData.get('item-phone'),
                studentId: formData.get('item-student-id'),
                notes: formData.get('item-notes'),
                priority: formData.get('item-priority'),
                icon: getCategoryIcon(formData.get('item-category'))
            };
            
            // Add to sample items (in a real app, this would go to a database)
            if (typeof sampleItems !== 'undefined') {
                sampleItems.unshift(newItem);
            }
            
            // Show success message
            showSuccessMessage('Item created successfully!');
            
            // Reset form
            resetForm();
        }

        // Reset form
        function resetForm() {
            document.getElementById('create-item-form').reset();
            document.getElementById('item-date').value = new Date().toISOString().split('T')[0];
            updatePreview();
        }

        // Show success message
        function showSuccessMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'success-message';
            messageDiv.innerHTML = `
                <i class="fas fa-check-circle"></i>
                <span>${message}</span>
            `;
            
            const container = document.querySelector('.create-item-container');
            container.insertBefore(messageDiv, container.firstChild);
            
            // Remove message after 5 seconds
            setTimeout(() => {
                messageDiv.remove();
            }, 5000);
        }

        // Get category icon
        function getCategoryIcon(category) {
            const iconMap = {
                'electronics': 'fas fa-laptop',
                'jewelry': 'fas fa-gem',
                'clothing': 'fas fa-tshirt',
                'documents': 'fas fa-file-alt',
                'keys': 'fas fa-key',
                'books': 'fas fa-book',
                'bags': 'fas fa-briefcase',
                'watches': 'fas fa-clock',
                'other': 'fas fa-question-circle'
            };
            
            return iconMap[category] || 'fas fa-question-circle';
        }
    </script>
</body>
</html>
